{"version":3,"file":"commonHelpers.js","sources":["../src/js/fetch-data.js","../src/js/create-markup.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = `29304756-51da1fab5abbfa991ea2eaa1b`; \n\nasync function fetchData(textQuery, page, perPage) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: textQuery,\n        image_type:'photo', \n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n    }); \n\n    const response = await axios.get(`${BASE_URL}?${params}`);\n\n    return response;   \n} \n\nexport { fetchData };\n\n","export function createMarkup(images) {\n    const gallery = document.querySelector('.gallery');\n    const markupGallery = images\n        .map(({ webformatURL, tags, likes, views, comments, downloads, largeImageURL }) => {\n            return `\n            <div class=\"photo-card\">\n                <a href = \"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                <div class=\"info\">\n                    <p class=\"info-item\"><b>Likes:</b>${likes}</p>\n                    <p class=\"info-item\"><b>Views:</b>${views}</p>\n                    <p class=\"info-item\"><b>Comments:</b>${comments}</p>\n                    <p class=\"info-item\"><b>Downloads:</b>${downloads}</p>\n                </div> \n                </a>\n            </div>`\n        })\n        .join('')\n    gallery.insertAdjacentHTML('beforeend', markupGallery);\n}\n\n\n\n    \n","import { fetchData } from './js/fetch-data';\nimport { createMarkup } from './js/create-markup';\nimport SimpleLightbox from \"simplelightbox\";\nimport iziToast from 'izitoast'; \nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport 'izitoast/dist/css/iziToast.css'; \n\nconst refs = {\n    searchForm: document.querySelector('#search-form'),\n    gallery: document.querySelector('.gallery'),\n    imageGallery: document.querySelector('photo-card'),\n    submitBtn: document.querySelector('.submit-btn'),\n}\n\nlet textQuery = '';\nlet page = 1;\nconst perPage = 40;\n\nrefs.submitBtn.disabled = true;\n\nrefs.searchForm.addEventListener('submit', onSearchForm);\nrefs.searchForm.addEventListener('input', (e) => e.target.value ? refs.submitBtn.disabled = false : refs.submitBtn.disabled = true);\n\n\nfunction onSearchForm(e) {\n    e.preventDefault();\n\n    page = 1;\n    textQuery = e.currentTarget.searchQuery.value.trim();\n\n    refs.gallery.innerHTML = '';\n\n    if (/\\d/.test(textQuery)) {\n        return iziToast.error({\n                    title: 'Error',\n                    message: `Sorry, you can only use letters to search`,\n                    position: 'center',\n                });\n    }\n\n    fetchData(textQuery, page, perPage)\n        .then(({ data }) => {\n            if (data.totalHits === 0) {\n                iziToast.error({\n                    title: 'Error',\n                    message: `Sorry, there are no images matching your search query. Please try again.`,\n                    position: 'center',\n                });\n            } else {\n                createMarkup(data.hits);\n                onSimpleLightbox();\n                iziToast.info({\n                    title: 'Information',\n                    message: `Hooray! We found ${data.totalHits} images.`,\n                    position: 'center',\n                });\n            }\n        })\n        .catch(error => {\n            console.error(error);\n            iziToast.error({\n                    title: 'Server error',\n                    message: 'Oops! Something went wrong! Try reloading the page!',\n                    position: 'center',\n                })\n        });\n}\n\nfunction onSimpleLightbox() {\n    new SimpleLightbox('.gallery a').refresh();\n}"],"names":["BASE_URL","API_KEY","fetchData","textQuery","page","perPage","params","axios","createMarkup","images","gallery","markupGallery","webformatURL","tags","likes","views","comments","downloads","largeImageURL","refs","onSearchForm","e","iziToast","data","onSimpleLightbox","error","SimpleLightbox"],"mappings":"owBAGA,MAAMA,EAAW,2BACXC,EAAU,qCAEhB,eAAeC,EAAUC,EAAWC,EAAMC,EAAS,CAC/C,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKL,EACL,EAAGE,EACH,WAAW,QACX,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CAClB,CAAK,EAID,OAFiB,MAAME,EAAM,IAAI,GAAGP,KAAYM,GAAQ,CAG5D,CCpBO,SAASE,EAAaC,EAAQ,CACjC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAgBF,EACjB,IAAI,CAAC,CAAE,aAAAG,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,KACpD;AAAA;AAAA,6BAEUA;AAAA,4BACDN,WAAsBC;AAAA;AAAA,wDAEMC;AAAA,wDACAC;AAAA,2DACGC;AAAA,4DACCC;AAAA;AAAA;AAAA,mBAInD,EACA,KAAK,EAAE,EACZP,EAAQ,mBAAmB,YAAaC,CAAa,CACzD,CCZA,MAAMQ,EAAO,CACT,WAAY,SAAS,cAAc,cAAc,EACjD,QAAS,SAAS,cAAc,UAAU,EAC1C,aAAc,SAAS,cAAc,YAAY,EACjD,UAAW,SAAS,cAAc,aAAa,CACnD,EAEA,IAAIhB,EAAY,GACZC,EAAO,EACX,MAAMC,EAAU,GAEhBc,EAAK,UAAU,SAAW,GAE1BA,EAAK,WAAW,iBAAiB,SAAUC,CAAY,EACvDD,EAAK,WAAW,iBAAiB,QAAUE,GAAMA,EAAE,OAAO,MAAQF,EAAK,UAAU,SAAW,GAAQA,EAAK,UAAU,SAAW,EAAI,EAGlI,SAASC,EAAaC,EAAG,CAQrB,GAPAA,EAAE,eAAc,EAEhBjB,EAAO,EACPD,EAAYkB,EAAE,cAAc,YAAY,MAAM,KAAI,EAElDF,EAAK,QAAQ,UAAY,GAErB,KAAK,KAAKhB,CAAS,EACnB,OAAOmB,EAAS,MAAM,CACV,MAAO,QACP,QAAS,4CACT,SAAU,QAC9B,CAAiB,EAGbpB,EAAUC,EAAWC,EAAMC,CAAO,EAC7B,KAAK,CAAC,CAAE,KAAAkB,KAAW,CACZA,EAAK,YAAc,EACnBD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,QAC9B,CAAiB,GAEDd,EAAae,EAAK,IAAI,EACtBC,IACAF,EAAS,KAAK,CACV,MAAO,cACP,QAAS,oBAAoBC,EAAK,oBAClC,SAAU,QAC9B,CAAiB,EAEjB,CAAS,EACA,MAAME,GAAS,CACZ,QAAQ,MAAMA,CAAK,EACnBH,EAAS,MAAM,CACP,MAAO,eACP,QAAS,sDACT,SAAU,QAC9B,CAAiB,CACjB,CAAS,CACT,CAEA,SAASE,GAAmB,CACxB,IAAIE,EAAe,YAAY,EAAE,SACrC"}