{"version":3,"file":"commonHelpers.js","sources":["../src/js/fetch-data.js","../src/js/create-markup.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = `29304756-51da1fab5abbfa991ea2eaa1b`; \n\nasync function fetchData(textQuery, page, perPage) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: textQuery,\n        image_type:'photo', \n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,   \n    }); \n\n    const response = await axios.get(`${BASE_URL}?${params}`);\n\n    return response;   \n} \n\nexport { fetchData };\n\n","export function createMarkup(images) {\n    const gallery = document.querySelector('.gallery');\n        const markupGallery = images.map(({ webformatURL, tags, likes, views, comments, downloads, largeImageURL }) =>\n            {return `<div class=\"photo-card\">\n                <a href = \"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                <div class=\"info\">\n                    <p class=\"info-item\"><b>Likes:</b>${likes}</p>\n                    <p class=\"info-item\"><b>Views:</b>${views}</p>\n                    <p class=\"info-item\"><b>Comments:</b>${comments}</p>\n                    <p class=\"info-item\"><b>Downloads:</b>${downloads}</p>\n                </div> \n                </a>\n            </div>`\n    })\n        .join(''); \n    gallery.insertAdjacentHTML('beforeend', markupGallery);\n}   ","import { fetchData } from './js/fetch-data';\nimport { createMarkup } from './js/create-markup';\nimport SimpleLightbox from \"simplelightbox\";\nimport iziToast from 'izitoast'; \nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport 'izitoast/dist/css/iziToast.css'; \n\nconst refs = {\n    searchForm: document.querySelector('#search-form'),\n    gallery: document.querySelector('.gallery'),\n    imageGallery: document.querySelector('photo-card'),\n    submitBtn: document.querySelector('.submit-btn'),\n    loadMoreBtn: document.querySelector('.load-more'),\n    loader: document.querySelector('.loader'),\n}\n\nlet page = 1;\nconst perPage = 40;\n\nlet textQuery = '';\n\nrefs.submitBtn.disabled = true;\nrefs.loader.classList.add('hidden');\n\nrefs.searchForm.addEventListener('submit', onSearchForm);\nrefs.searchForm.addEventListener('input', (e) => e.target.value ? refs.submitBtn.disabled = false : refs.submitBtn.disabled = true);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearchForm(e) {\n    e.preventDefault();\n    page = 1;\n    textQuery = e.currentTarget.searchQuery.value.trim();\n\n    if (textQuery === '') {\n        iziToast.error({\n            title: 'Error',\n            message: `Sorry, you didn't write what to look for`,\n            position: 'center',\n        });\n        refs.searchForm.reset();\n        refs.submitBtn.disabled = true;\n        return;\n    }\n\n    refs.gallery.innerHTML = '';\n\n    if (/\\d/.test(textQuery)) {\n        return iziToast.error({\n            title: 'Error',\n            message: `Sorry, you can only use letters to search`,\n            position: 'center',\n        });\n    }\n    try {\n        const { data } = await fetchData(textQuery, page, perPage);\n        refs.loader.classList.remove('hidden');\n\n            if (data.totalHits === 0) {\n                refs.loader.classList.add('hidden');\n                iziToast.error({\n                    title: 'Error',\n                    message: `Sorry, there are no images matching your search query. Please try again.`,\n                    position: 'center',\n                });\n            } else {\n                refs.loader.classList.add('hidden');\n\n                createMarkup(data.hits);\n                onSimpleLightbox(); \n\n                iziToast.info({\n                    title: 'Information',\n                    message: `Hooray! We found ${data.totalHits} images.`,\n                    position: 'center',\n                });\n\n                if (data.totalHits > perPage) {\n                    refs.loadMoreBtn.classList.remove('hidden');\n                }\n            } \n        }\n        catch(error) {\n            console.error(error);\n            refs.loader.classList.add('hidden');  \n            iziToast.error({\n                title: 'Server error',\n                message: 'Oops! Something went wrong! Try reloading the page!',\n                position: 'center',\n            });\n        }\n}\n\nasync function onLoadMore() {\n    page += 1;\n    try {\n        const {data} = await fetchData(textQuery, page, perPage);\n        createMarkup(data.hits);\n        onSimpleLightbox();\n            \n        const totalPages = Math.ceil(data.totalHits / perPage);\n            if (page < totalPages) {\n                refs.loadMoreBtn.classList.remove('hidden');\n\n            }\n            else {\n                iziToast.info({\n                    title: 'Information',\n                    message: `We're sorry, but you've reached the end of search results.`,\n                    position: 'center',\n                });\n                return;\n            }\n        }\n        catch(error) {\n            console.log(error);\n        }\n}\n\nfunction onSimpleLightbox() {\n    new SimpleLightbox('.gallery a').refresh();\n}\n\n\n\n"],"names":["BASE_URL","API_KEY","fetchData","textQuery","page","perPage","params","axios","createMarkup","images","gallery","markupGallery","webformatURL","tags","likes","views","comments","downloads","largeImageURL","refs","onSearchForm","e","onLoadMore","iziToast","data","onSimpleLightbox","error","totalPages","SimpleLightbox"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAEhB,eAAeC,EAAUC,EAAWC,EAAMC,EAAS,CAC/C,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAKL,EACL,EAAGE,EACH,WAAW,QACX,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CAClB,CAAK,EAID,OAFiB,MAAME,EAAM,IAAI,GAAGP,KAAYM,GAAQ,CAG5D,CCnBO,SAASE,EAAaC,EAAQ,CACjC,MAAMC,EAAU,SAAS,cAAc,UAAU,EACvCC,EAAgBF,EAAO,IAAI,CAAC,CAAE,aAAAG,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,CAAe,IAC9F;AAAA,6BACSA;AAAA,4BACDN,WAAsBC;AAAA;AAAA,wDAEMC;AAAA,wDACAC;AAAA,2DACGC;AAAA,4DACCC;AAAA;AAAA;AAAA,mBAIvD,EACI,KAAK,EAAE,EACZP,EAAQ,mBAAmB,YAAaC,CAAa,CACzD,CCVA,MAAMQ,EAAO,CACT,WAAY,SAAS,cAAc,cAAc,EACjD,QAAS,SAAS,cAAc,UAAU,EAC1C,aAAc,SAAS,cAAc,YAAY,EACjD,UAAW,SAAS,cAAc,aAAa,EAC/C,YAAa,SAAS,cAAc,YAAY,EAChD,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAEA,IAAIf,EAAO,EACX,MAAMC,EAAU,GAEhB,IAAIF,EAAY,GAEhBgB,EAAK,UAAU,SAAW,GAC1BA,EAAK,OAAO,UAAU,IAAI,QAAQ,EAElCA,EAAK,WAAW,iBAAiB,SAAUC,CAAY,EACvDD,EAAK,WAAW,iBAAiB,QAAUE,GAAMA,EAAE,OAAO,MAAQF,EAAK,UAAU,SAAW,GAAQA,EAAK,UAAU,SAAW,EAAI,EAClIA,EAAK,YAAY,iBAAiB,QAASG,CAAU,EAErD,eAAeF,EAAaC,EAAG,CAK3B,GAJAA,EAAE,eAAc,EAChBjB,EAAO,EACPD,EAAYkB,EAAE,cAAc,YAAY,MAAM,KAAI,EAE9ClB,IAAc,GAAI,CAClBoB,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2CACT,SAAU,QACtB,CAAS,EACDJ,EAAK,WAAW,QAChBA,EAAK,UAAU,SAAW,GAC1B,MACH,CAID,GAFAA,EAAK,QAAQ,UAAY,GAErB,KAAK,KAAKhB,CAAS,EACnB,OAAOoB,EAAS,MAAM,CAClB,MAAO,QACP,QAAS,4CACT,SAAU,QACtB,CAAS,EAEL,GAAI,CACA,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMtB,EAAUC,EAAWC,EAAMC,CAAO,EACzDc,EAAK,OAAO,UAAU,OAAO,QAAQ,EAE7BK,EAAK,YAAc,GACnBL,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCI,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,QAC9B,CAAiB,IAEDJ,EAAK,OAAO,UAAU,IAAI,QAAQ,EAElCX,EAAagB,EAAK,IAAI,EACtBC,IAEAF,EAAS,KAAK,CACV,MAAO,cACP,QAAS,oBAAoBC,EAAK,oBAClC,SAAU,QAC9B,CAAiB,EAEGA,EAAK,UAAYnB,GACjBc,EAAK,YAAY,UAAU,OAAO,QAAQ,EAGrD,OACKO,EAAN,CACI,QAAQ,MAAMA,CAAK,EACnBP,EAAK,OAAO,UAAU,IAAI,QAAQ,EAClCI,EAAS,MAAM,CACX,MAAO,eACP,QAAS,sDACT,SAAU,QAC1B,CAAa,CACJ,CACT,CAEA,eAAeD,GAAa,CACxBlB,GAAQ,EACR,GAAI,CACA,KAAM,CAAC,KAAAoB,CAAI,EAAI,MAAMtB,EAAUC,EAAWC,EAAMC,CAAO,EACvDG,EAAagB,EAAK,IAAI,EACtBC,IAEA,MAAME,EAAa,KAAK,KAAKH,EAAK,UAAYnB,CAAO,EACjD,GAAID,EAAOuB,EACPR,EAAK,YAAY,UAAU,OAAO,QAAQ,MAGzC,CACDI,EAAS,KAAK,CACV,MAAO,cACP,QAAS,6DACT,SAAU,QAC9B,CAAiB,EACD,MACH,CACJ,OACKG,EAAN,CACI,QAAQ,IAAIA,CAAK,CACpB,CACT,CAEA,SAASD,GAAmB,CACxB,IAAIG,EAAe,YAAY,EAAE,SACrC"}